<mat-grid-list cols="4" rowHeight="500px">
  <mat-grid-tile colspan="1" class="pp-label">
    <h1>Create New ORTF Request:</h1>
  </mat-grid-tile>

  <mat-grid-tile colspan="3" class="pp-form">
    <form [formGroup]="clientForm" (ngSubmit)="addRequest($event)">

      <div>

        <mat-form-field appearance="fill">
          <mat-label>Client Name</mat-label>
          <input formControlName="clientName" type="text" placeholder="Pick one" matInput [matAutocomplete]="auto">




          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let i of clients" [value]="i.name">{{ i.name }}</mat-option>
          </mat-autocomplete>


        </mat-form-field>
      </div>
      <mat-divider></mat-divider>

      <div>
        <label id="ortf-direction-radio-group-label">ORTF Direction</label>
      </div>
      <mat-radio-group formControlName="ortfDirection" [(ngModel)]="ortDirection" (change)="onChangeRadio()" required
        aria-labelledby="ortf-direction-radio-group-label" class="pp-direction">
        <mat-radio-button value=1>Incoming</mat-radio-button>
        <mat-radio-button value=2>Outgoing</mat-radio-button>
      </mat-radio-group>

      <mat-divider></mat-divider>

      <div>
        <label id="ortf-direction-radio-group-label">ORTF Type</label>
      </div>
      <mat-radio-group formControlName="ortfType" (change)="onChangeRadio()" required
        aria-labelledby="ortf-direction-radio-group-label" class="pp-direction">
        <mat-radio-button value="1">Main Order</mat-radio-button>
        <mat-radio-button value="2">Specialty</mat-radio-button>
      </mat-radio-group>

      <mat-divider></mat-divider>

      <mat-form-field appearance="fill">
        <mat-label>{{ortDirection == 1 ? "Implementation Date" : "Termination Date"}}</mat-label>
        <input matInput formControlName="implementationDate" [matDatepicker]="picker" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-divider></mat-divider>

      <div>
        <mat-label>Select ORTF File</mat-label>
        <mat-toolbar>
          <button type="button" mat-flat-button color="primary" (click)="fileInput.click()">
            Browse File
          </button>
        </mat-toolbar>

        <!-- Fetch selected filed on change -->
        <input formControlName="ortfFile" hidden type="file" #fileInput id="uploadFile"
          (change)="uploadFileEvt($event)" name="uploadFile" multiple accept="*" />
      </div>

      <mat-divider></mat-divider>



      <!-- <div>
        <mat-label>Select Parsed File</mat-label>
        <mat-toolbar>
          <button
            type="button"
            mat-flat-button
            color="primary"
            (click)="fileInput2.click()"
          >
            Browse File
          </button>
        </mat-toolbar>

        
        <input
          formControlName="parsedFile"
          hidden
          type="file"
          #fileInput2
          id="uploadFile2"
          (change)="uploadFileEvt2($event)"
          name="uploadFile2"
          multiple
          accept="*"
        />    
      </div>    

      <mat-divider></mat-divider>  -->


      <mat-radio-group formControlName="ortfFileType" required>
        <mat-radio-button value="Test">Test</mat-radio-button>
        <mat-radio-button value="Production">Production</mat-radio-button>
        <mat-radio-button value="Lag">Lag</mat-radio-button>
      </mat-radio-group>

      <mat-divider></mat-divider>

      <mat-form-field appearance="fill">
        <mat-label>Jira Ticket</mat-label>
        <input formControlName="jiraTicket" type="text" matInput>
      </mat-form-field>

      <mat-divider></mat-divider>



      <button [disabled]="clientForm.invalid" type="submit" mat-raised-button color="primary">
        Create
      </button>
    </form>
  </mat-grid-tile>




  <mat-grid-tile colspan="4" class="pp-table">
    <h1>Existing ORTF Requests:</h1>

    <div>
      <label id="ortf-direction-radio-group-label">ORTF Direction</label>
    </div>
    <mat-radio-group (change)="handleOrtfDirectionFilter($event)">
      <mat-radio-button value="1">Inbound</mat-radio-button>
      <mat-radio-button value="2">Outbound</mat-radio-button>
    </mat-radio-group>      

    <div>
      <label id="ortf-status-radio-group-label">ORTF Status</label>
    </div>
    <mat-radio-group (change)="handleOrtfStatusFilter($event)">
      <mat-radio-button *ngFor="let orftRequestStatus of ortfRequestStatuses" value="{{orftRequestStatus.id}}">
        {{orftRequestStatus.statusName}}</mat-radio-button>
    </mat-radio-group>

    <table mat-table [dataSource]="existingRequests">
      <!-- Client Name Column -->
      <ng-container matColumnDef="clientName">
        <th mat-header-cell *matHeaderCellDef> Client Name </th>
        <td mat-cell *matCellDef="let element"> {{element.clientName}} </td>
      </ng-container>

      <!-- ORT Direction Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> ORTF Direction111 </th>
        <td mat-cell *matCellDef="let element"> {{element.ortfDirection}} </td>
      </ng-container>

      <!-- ORTF Implementation date Column -->
      <ng-container matColumnDef="implementationDate">
        <th mat-header-cell *matHeaderCellDef> Implementation Date </th>
        <td mat-cell *matCellDef="let element"> {{element.implementationDate}} </td>
      </ng-container>

      <!-- File Name Column -->
      <ng-container matColumnDef="filename">
        <th mat-header-cell *matHeaderCellDef> File Name </th>
        <td mat-cell *matCellDef="let element"> {{element.file.filename}} </td>
      </ng-container>

      <!-- Type Column -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> Type </th>
        <td mat-cell *matCellDef="let element"> {{element.file.type}} </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let element"> {{element.status}} </td>
      </ng-container>

      <!-- Last Modified User Column -->
      <ng-container matColumnDef="lastModUser">
        <th mat-header-cell *matHeaderCellDef> Last Modified User </th>
        <td mat-cell *matCellDef="let element"> TODO </td>
      </ng-container>

      <!-- Last Modified Date Column -->
      <ng-container matColumnDef="lastModDate">
        <th mat-header-cell *matHeaderCellDef> Last Modified Date </th>
        <td mat-cell *matCellDef="let element"> {{element.lastModDate}} </td>
      </ng-container>

      <!-- Open Button Column -->
      <ng-container matColumnDef="open">
        <th mat-header-cell *matHeaderCellDef> Open File </th>
        <td mat-cell *matCellDef="let element">
          <button mat-raised-button color="primary" (click)="navigateToOrtfRequests(element.clientName)">Open</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </mat-grid-tile>
</mat-grid-list>